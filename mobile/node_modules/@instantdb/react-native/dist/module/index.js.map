{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"AAAA,OAAO,gCAAgC,CAAC;AAExC,OAAO,KAAK,MAAM,WAAW,CAAC;AAC9B,OAAO,eAAe,MAAM,mBAAmB,CAAC;AAChD,OAAO,eAAe,MAAM,mBAAmB,CAAC;AAChD,OAAO,OAAO,MAAM,WAAW,CAAC;AAChC,OAAO,EAAE,kBAAkB,EAAE,MAAM,WAAW,CAAC;AAE/C,OAAO,EAAE,4BAA4B,EAAE,MAAM,yBAAyB,CAAC;AAEvE,OAAO,EACL,CAAC,EACD,EAAE,EACF,EAAE,EACF,MAAM;AACN,QAAQ;AACR,eAAe,EACf,yBAAyB;AAEzB,mBAAmB;AACnB,0BAA0B;AAE1B,QAAQ;AACR,yBAAyB,EAyEzB,cAAc,GAKf,MAAM,iBAAiB,CAAC;AAEzB;;;;;;;;;;;;;;;;;;;GAmBG;AACH,SAAS,IAAI;AAIX,oEAAoE;AACpE,+CAA+C;AAC/C,MAEC;IAMD,MAAM,YAAY,GAAG;QACnB,cAAc,EAAE,kBAAkB,CAAC,cAAc;QACjD,cAAc,EAAE,kBAAkB,CAAC,cAAc;QACjD,GAAG,MAAM;QACT,cAAc,EAAE,CAAC,MAAM,CAAC,cAAc,IAAI,KAAK,CAAa;KAC7D,CAAC;IACF,OAAO,IAAI,0BAA0B,CAInC,YAAY,EAAE;QACd,kBAAkB,EAAE,OAAO;KAC5B,CAAC,CAAC;AACL,CAAC;AAED;;;;;;;;;;;;;GAaG;AACH,MAAM,iBAAiB,GAAG,IAAI,CAAC;AAE/B,MAAM,0BAOJ,SAAQ,4BAAsD;IAC9D,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;IACrB,MAAM,CAAC,eAAe,GAAG,eAAe,CAAC;IACzC,MAAM,CAAC,eAAe,GAAG,eAAe,CAAC;;AAG3C,OAAO,EACL,IAAI,EACJ,iBAAiB,EACjB,EAAE,EACF,EAAE,EACF,MAAM,EACN,CAAC,EACD,yBAAyB,EACzB,0BAA0B;AAE1B,QAAQ;AACR,eAAe,EACf,yBAAyB;AAEzB,mBAAmB;AACnB,0BAA0B;AAuE1B,eAAe;AACf,cAAc,GAWf,CAAC","sourcesContent":["import 'react-native-get-random-values';\n\nimport Store from './Storage';\nimport EventSourceImpl from './EventSourceImpl';\nimport NetworkListener from './NetworkListener';\nimport version from './version';\nimport { streamConstructors } from './Streams';\n\nimport { InstantReactAbstractDatabase } from '@instantdb/react-common';\n\nimport {\n  i,\n  id,\n  tx,\n  lookup,\n  // error\n  InstantAPIError,\n  setInstantWarningsEnabled,\n\n  // sync table enums\n  SyncTableCallbackEventType,\n\n  // types\n  createInstantRouteHandler,\n  type RoomSchemaShape,\n  type InstantQuery,\n  type InstantQueryResult,\n  type InstantSchema,\n  type InstantSchemaDatabase,\n  type ConnectionStatus,\n  type BackwardsCompatibleSchema,\n  type IInstantDatabase,\n  type Config,\n  type Query,\n  type QueryResponse,\n  type InstantObject,\n  type AuthState,\n  type User,\n\n  // presence types\n  type PresencePeer,\n\n  // schema types\n  type AttrsDefs,\n  type CardinalityKind,\n  type DataAttrDef,\n  type EntitiesDef,\n  type EntitiesWithLinks,\n  type EntityDef,\n  type InstantGraph,\n  type InstantUnknownSchemaDef,\n  type LinkAttrDef,\n  type LinkDef,\n  type LinksDef,\n  type ResolveAttrs,\n  type ValueTypes,\n  type InstantEntity,\n  type ConfigWithSchema,\n  type InstaQLEntity,\n  type InstaQLResult,\n  type InstaQLEntitySubquery,\n  type RoomsOf,\n  type RoomsDef,\n  type PresenceOf,\n  type TopicsOf,\n  type TopicOf,\n  type RoomHandle,\n  type CreateParams,\n  type InstantConfig,\n  type InstantSchemaDef,\n  type InstantUnknownSchema,\n  type TransactionChunk,\n  type InstantRules,\n  type UpdateParams,\n  type LinkParams,\n  type ValidQuery,\n  type ExchangeCodeForTokenParams,\n  type SendMagicCodeParams,\n  type SendMagicCodeResponse,\n  type SignInWithIdTokenParams,\n  type VerifyMagicCodeParams,\n  type VerifyResponse,\n\n  // storage types\n  type FileOpts,\n  type UploadFileResponse,\n  type DeleteFileResponse,\n\n  // sync table types\n  type SyncTableCallback,\n  type SyncTableCallbackEvent,\n  type SyncTableInitialSyncBatch,\n  type SyncTableInitialSyncComplete,\n  type SyncTableSyncTransaction,\n  type SyncTableLoadFromStorage,\n  type SyncTableSetupError,\n  StoreInterface,\n  type StoreInterfaceStoreName,\n  CreateReadStreamOpts,\n  CreateWriteStreamOpts,\n  InstantWritableStream,\n} from '@instantdb/core';\n\n/**\n *\n * The first step: init your application!\n *\n * Visit https://instantdb.com/dash to get your `appId` :)\n *\n * @example\n *  import { init } from \"@instantdb/react-native\"\n *\n *  const db = init({ appId: \"my-app-id\" })\n *\n *  // You can also provide a schema for type safety and editor autocomplete!\n *\n *  import { init } from \"@instantdb/react-native\"\n *  import schema from \"\"../instant.schema.ts\";\n *\n *  const db = init({ appId: \"my-app-id\", schema })\n *\n *  // To learn more: https://instantdb.com/docs/modeling-data\n */\nfunction init<\n  Schema extends InstantSchemaDef<any, any, any> = InstantUnknownSchema,\n  UseDates extends boolean = false,\n>(\n  // Allows config with missing `useDateObjects`, but keeps `UseDates`\n  // as a non-nullable in the InstantConfig type.\n  config: Omit<InstantConfig<Schema, UseDates>, 'useDateObjects'> & {\n    useDateObjects?: UseDates;\n  },\n): InstantReactNativeDatabase<\n  Schema,\n  UseDates,\n  InstantConfig<Schema, UseDates>\n> {\n  const configStrict = {\n    ReadableStream: streamConstructors.ReadableStream,\n    WritableStream: streamConstructors.WritableStream,\n    ...config,\n    useDateObjects: (config.useDateObjects ?? false) as UseDates,\n  };\n  return new InstantReactNativeDatabase<\n    Schema,\n    UseDates,\n    InstantConfig<Schema, UseDates>\n  >(configStrict, {\n    '@instantdb/react': version,\n  });\n}\n\n/**\n * @deprecated\n * `init_experimental` is deprecated. You can replace it with `init`.\n *\n * @example\n *\n * // Before\n * import { init_experimental } from \"@instantdb/react-native\"\n * const db = init_experimental({  ...  });\n *\n * // After\n * import { init } from \"@instantdb/react-native\"\n * const db = init({ ...  });\n */\nconst init_experimental = init;\n\nclass InstantReactNativeDatabase<\n  Schema extends InstantSchemaDef<any, any, any>,\n  UseDates extends boolean,\n  Config extends InstantConfig<Schema, UseDates> = InstantConfig<\n    Schema,\n    UseDates\n  >,\n> extends InstantReactAbstractDatabase<Schema, UseDates, Config> {\n  static Store = Store;\n  static NetworkListener = NetworkListener;\n  static EventSourceImpl = EventSourceImpl;\n}\n\nexport {\n  init,\n  init_experimental,\n  id,\n  tx,\n  lookup,\n  i,\n  createInstantRouteHandler,\n  InstantReactNativeDatabase,\n\n  // error\n  InstantAPIError,\n  setInstantWarningsEnabled,\n\n  // sync table enums\n  SyncTableCallbackEventType,\n\n  // types\n  type Config,\n  type Query,\n  type QueryResponse,\n  type InstantObject,\n  type User,\n  type AuthState,\n  type ConnectionStatus,\n  type InstantQuery,\n  type InstantQueryResult,\n  type InstantSchema,\n  type InstantSchemaDatabase,\n  type IInstantDatabase,\n  type InstantEntity,\n  type RoomSchemaShape,\n\n  // presence types\n  type PresencePeer,\n\n  // schema types\n  type AttrsDefs,\n  type CardinalityKind,\n  type DataAttrDef,\n  type EntitiesDef,\n  type EntitiesWithLinks,\n  type EntityDef,\n  type InstantGraph,\n  type CreateParams,\n  type LinkAttrDef,\n  type InstantConfig,\n  type LinkDef,\n  type InstantUnknownSchemaDef,\n  type LinksDef,\n  type RoomsOf,\n  type RoomsDef,\n  type RoomHandle,\n  type PresenceOf,\n  type TopicsOf,\n  type TopicOf,\n  type ResolveAttrs,\n  type ValueTypes,\n  type InstaQLEntity,\n  type InstaQLResult,\n  type InstaQLEntitySubquery,\n  type InstantSchemaDef,\n  type InstantUnknownSchema,\n  type BackwardsCompatibleSchema,\n  type InstantRules,\n  type UpdateParams,\n  type LinkParams,\n  type ValidQuery,\n  type ExchangeCodeForTokenParams,\n  type SendMagicCodeParams,\n  type TransactionChunk,\n  type SendMagicCodeResponse,\n  type SignInWithIdTokenParams,\n  type VerifyMagicCodeParams,\n  type VerifyResponse,\n\n  // storage types\n  type FileOpts,\n  type UploadFileResponse,\n  type DeleteFileResponse,\n\n  // stream types\n  type CreateReadStreamOpts,\n  type CreateWriteStreamOpts,\n  type InstantWritableStream,\n\n  // custom store\n  StoreInterface,\n  type StoreInterfaceStoreName,\n\n  // sync table types\n  type SyncTableCallback,\n  type SyncTableCallbackEvent,\n  type SyncTableInitialSyncBatch,\n  type SyncTableInitialSyncComplete,\n  type SyncTableSyncTransaction,\n  type SyncTableLoadFromStorage,\n  type SyncTableSetupError,\n};\n"]}